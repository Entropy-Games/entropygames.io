var __awaiter=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}c((o=o.apply(e,n||[])).next())}))};import{Context}from"./context.js";import{ESBoolean,ESUndefined,types,ESErrorPrimitive}from"./primitiveTypes.js";export const digits="0123456789";export const identifierChars="_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";export const singleLineComment="//";export const global=new Context;export let None;export const setNone=e=>{None=e};export const stringSurrounds=["'","`",'"'];export let IS_NODE_INSTANCE=!1;export const runningInNode=()=>{IS_NODE_INSTANCE=!0};export const KEYWORDS=["var","global","let","const","if","else","while","for","in","continue","break","func","return","yield","class","extends"];export const globalConstants={false:new ESBoolean(!1),true:new ESBoolean(!0),undefined:new ESUndefined,any:types.any,number:types.number,string:types.string,bool:types.bool,function:types.function,array:types.array,object:types.object,type:types.type,error:types.error,maths:ESErrorPrimitive.wrap(Math)};export let now=()=>0;export function refreshPerformanceNow(e){var n;return __awaiter(this,void 0,void 0,(function*(){if(e){const e=yield import("perf_hooks");now=null!==(n=()=>{var n;return null===(n=null==e?void 0:e.performance)||void 0===n?void 0:n.now()})&&void 0!==n?n:()=>0}else now=()=>{try{return null===performance||void 0===performance?void 0:performance.now()}catch(e){return 0}}}))}refreshPerformanceNow(IS_NODE_INSTANCE);