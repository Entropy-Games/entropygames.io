import{run,init}from"../es";import"../es/tests.js";import{str}from"../es/util.js";const input=$("#input"),output=document.getElementById("output"),submit=$("#submit"),perfTestButton=$("#perf-test");function outputFunc(t){const o=document.createElement("p");o.innerHTML=str(t),output.appendChild(o)}input.val(localStorage.ES_IDE_TEXT),localStorage.ES_IDE_TEXT||="print('hello world');",init(outputFunc,(()=>outputFunc("This does not support the input function."))),submit.click((async()=>{output.innerHTML="";const t=run(input.val(),{measurePerformance:!0});t.error&&outputFunc(t.error.str)}));const nIterations=10;perfTestButton.click((t=>{output.innerHTML="";const o=input.val();let n=0;for(let t=0;t<10;t++){let t=run(o);t.error&&outputFunc(t.error.str),n+=t.timeData.total}const u=`10 iterations took an average of ${Number((n/10).toPrecision(2))}ms`;outputFunc(u),console.log(u)})),setInterval((()=>{localStorage.ES_IDE_TEXT=input.val()}),250);